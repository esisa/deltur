<!DOCTYPE html>
<!-- saved from url=(0063)http://twitter.github.com/bootstrap/examples/sticky-footer.html -->
<html lang="en"><script id="tinyhippos-injected">if (window.top.require) { window.top.require("ripple/bootstrap").inject(window, document); }</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>deltur.no</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    

    <script type=text/javascript>
  	$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>
    
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
	<script src="http://code.shutterstock.com/rickshaw/vendor/d3.v2.js"></script>
    <script src="{{ url_for('static', filename='js/lib/proj4s/proj4js-combined.js') }}"></script>
    <script src="js/rickshaw.js"></script>
	<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.js"></script>
    
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
        $(function() {
            $( document ).tooltip();
        });
    </script>
	
	
     <!-- CSS -->
	<!--link type="text/css" rel="stylesheet" href="http://jqueryui.com/themes/base/jquery.ui.all.css"-->
	<link type="text/css" rel="stylesheet" href="http://code.shutterstock.com/rickshaw/src/css/graph.css">
	<link type="text/css" rel="stylesheet" href="http://code.shutterstock.com/rickshaw/src/css/detail.css">
	<link type="text/css" rel="stylesheet" href="http://code.shutterstock.com/rickshaw/src/css/legend.css">
	<link type="text/css" rel="stylesheet" href="http://code.shutterstock.com/rickshaw/examples/css/lines.css">

   
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.css" />
	<!--[if lte IE 8]>
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.ie.css" />
	<![endif]-->
    <link href="{{ url_for('static', filename='css/bootstrap_alt.css') }}" rel="stylesheet">
	<link rel="stylesheet" href="{{ url_for('static', filename='fontawesome/css/font-awesome.css') }}">
    <style type="text/css">
    
        	.rickshaw_graph .detail .x_label { display: none }
        	.rickshaw_graph .detail .item { line-height: 1.4; padding: 0.5em }
        	.detail_swatch { float: right; display: inline-block; width: 10px; height: 10px; margin: 0 4px 0 0 }
        	.rickshaw_graph .detail .date { color: #a0a0a0 }
		
        	#chart {
        		position: relative;
        		left: 0px;
                width: 680px;
        	}
        	#y_axis {
        		position: absolute;
        		left: -40px;
        		top: 0;
        		bottom: 0;
        		width: 40px;
        	}

          /* Sticky footer styles
          -------------------------------------------------- */

          html,
          body {
            height: 100%;
            /* The html and body elements cannot have any padding or margin. */
          }

          /* Wrapper for page content to push down footer */
          #wrap {
            min-height: 100%;
            height: auto !important;
            height: 100%;
            /* Negative indent footer by it's height */
            margin: 0 auto -60px;
          }

         
	  
          /* Lastly, apply responsive CSS fixes as necessary */
          @media (max-width: 767px) {
            #footer {
              margin-left: -20px;
              margin-right: -20px;
              padding-left: 20px;
              padding-right: 20px;
            }
          }



          /* Custom page CSS
          -------------------------------------------------- */
          /* Not required for template or sticky footer method. */

          .container {
            width: auto;
            max-width: 680px;
    		margin-top: 30px;
          }
          .container .credit {
            margin: 20px 0;
          }
	  
    	  .btn-custom {
    	    background-color: hsl(214, 37%, 28%) !important;
    	    background-repeat: repeat-x;
    	    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#7a99c1", endColorstr="#2c4361");
    	    background-image: -khtml-gradient(linear, left top, left bottom, from(#7a99c1), to(#2c4361));
    	    background-image: -moz-linear-gradient(top, #7a99c1, #2c4361);
    	    background-image: -ms-linear-gradient(top, #7a99c1, #2c4361);
    	    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #7a99c1), color-stop(100%, #2c4361));
    	    background-image: -webkit-linear-gradient(top, #7a99c1, #2c4361);
    	    background-image: -o-linear-gradient(top, #7a99c1, #2c4361);
    	    background-image: linear-gradient(#7a99c1, #2c4361);
    	    border-color: #2c4361 #2c4361 hsl(214, 37%, 19.5%);
    	    color: #fff !important;
    	    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.56);
    	    -webkit-font-smoothing: antialiased;
    	  }
      
          label {
              display: inline-block;
              width: 5em;
          }
	  
    </style>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">							   
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />									   
  </head>

  <body>
      
      <div id="sharemodal" class="modal hide fade">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3>Modal header</h3>
        </div>
        <div class="modal-body">
          <p>One fine body…</p>
        </div>
        <div class="modal-footer">
          <a href="#" class="btn">Close</a>
          <a href="#" class="btn btn-primary">Save changes</a>
        </div>
      </div>
	  

    <!-- Part 1: Wrap all page content here -->
    <div id="wrap">
		
		<a style="margin:10px;" id="button-turkart" class="btn btn-custom hidden-phone" href="{{ url_for('home') }}"><i class="icon-share-alt"></i> Del ny tur</a>

      <!-- Begin page content -->
      <div class="container">
          <a style="text-decoration: none;" href="javascript:void(0)" id="elevProfile"><i class="icon-bar-chart visible-phone" ></a></i>&nbsp;
		  <a style="text-decoration: none;" href="{{ url_for('getTripEmbed', id=id) }}" title="Last ned"><i class="icon-arrow-down"></a></i>&nbsp;
		  <a style="text-decoration: none;" href="{{ url_for('getTripEmbed', id=id) }}" title="Embed"><i class="icon-signin"></a></i>&nbsp;
          
		  <b class="hidden-phone" style="color:F8F8F8;font-size: 18px;">Tur over Hoggskollen</b>
		  
			<div style="font-size: 17px;" class="pull-right">
			  <a name="fb_share" style="text-decoration: none;" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdeltur.no/7363%2F" target="_new" title="Del på Facebook"><i class="icon-facebook"></a></i>&nbsp;
			  <a style="text-decoration: none;" href="https://twitter.com/intent/tweet?url=http%3A%2F%2Fdeltur.no/7363%2F" target="_new" title="Del på Twitter"><i class="icon-twitter"></a></i>&nbsp;
			  <a style="text-decoration: none;" href="https://plus.google.com/share?url=http%3A%2F%2Fdeltur.no/7363%2F"  target="_new" title="Del på Google Plus"><i class="icon-google-plus"></a></i>&nbsp;
			   <a style="text-decoration: none;" href="mailto:?Subject=Se min tur&body=http%3A%2F%2Fdeltur.no/7363%2F" title="Del på e-post"><i class="icon-envelope-alt"></a></i>
			</div>

		<br>
		
		<div id="map" style="height: 500px; "></div>
		
		<br>
		
		<div id="chart_container">
			<div id="y_axis"></div>
			<div id="chart"></div>
			<div id="legend_container">
				<div id="smoother" title="Smoothing"></div>
				<div id="legend"></div>
			</div>
			<div id="slider"></div>
		</div>
		<a style="text-decoration: none;" href="javascript:void(0)" id="upTop"><i class="icon-double-angle-up visible-phone" ></a></i>&nbsp;
		
		<div style="color:F8F8F8; font-size: 12px;">
			Utviklet av <a href="http://www.kresendo.no">kresendo.no</a> og <a href="http://www.turkompisen.no">turkompisen.no</a>
		</div>	
      </div>
	  
	  

      <!--div id="push"></div>
    </div>




    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{{ url_for('static', filename='js/bootstrap-modal.js') }}"></script>

	<script type="text/javascript">
    
        $("#elevProfile").click(function() {
          $("html, body").animate({ scrollTop: $(document).height() }, "slow");
          return false;
        });
        
        $("#upTop").click(function() {
          $("html, body").animate({ scrollTop:0 }, "slow");
          return false;
        });

    
		var map = new L.Map('map', {keyboard: true, attributionControl: true, zoom: 10, center: [59.98,10.572]});

		map.attributionControl.setPrefix(""); // Fjerner powered by Leaflet
        
        if($('.container').width()>480) {
            L.control.scale({imperial:false, position: 'bottomleft'}).addTo(map);
        }
		

		skikart = new L.TileLayer("http://kart{s}.turkompisen.no/cgi-bin/tilecache.cgi/1.0.0/skikart/{z}/{x}/{y}.png", {
			attribution: '© <a href="http://www.openstreetmap.org" target="_new">OpenStreetMap</a>-bidragsytere, <a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_new">CC-BY-SA</a> og <a href="http://www.skogoglandskap.no" target="_new">Skog og Landskap</a>', 
			subdomains: ["1", "2", "3", "4"],
			//scheme: "tms",
			maxZoom: 18
		});

		turkart = new L.TileLayer("http://kart{s}.turkompisen.no/cgi-bin/tilecache.cgi/1.0.0/turkart/{z}/{x}/{y}.png", {
			attribution: '© <a href="http://www.openstreetmap.org" target="_new">OpenStreetMap</a>-bidragsytere, <a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_new">CC-BY-SA</a> og <a href="http://www.skogoglandskap.no" target="_new">Skog og Landskap</a>', 
			subdomains: ["1", "2", "3", "4"],
			//scheme: "tms",
			maxZoom: 18
		});
		
		veikart = new L.TileLayer("http://api.tiles.mapbox.com/v3/esisa.map-0tz2sd3q/{z}/{x}/{y}.png", {
			attribution: '© <a href="http://www.openstreetmap.org" target="_new">OpenStreetMap</a>-bidragsytere, <a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_new">CC-BY-SA</a>', 
			subdomains: ["1", "2", "3", "4"],
			//scheme: "tms",
			maxZoom: 18
		});

		map.addLayer(turkart);
		
		/*
		var baseMaps = {
		    "Turkart": turkart,
		    "Skikart": skikart
		};
		L.control.layers(baseMaps).addTo(map);
		*/
		
		var myLines = [{
		    "type": "LineString",
		    "coordinates": [
                [10.042745, 59.797355],
                [10.042907, 59.79755],
                [10.043003, 59.797615],
                [10.043198, 59.797687],
                [10.043273, 59.797703],
                [10.043432, 59.797775],
                [10.043505, 59.797817],
                [10.043573, 59.797893],
                [10.04385, 59.797909],
                [10.044102, 59.797974],
                [10.044263, 59.79797],
                [10.044344, 59.797977],
                [10.044491, 59.797947],
                [10.044564, 59.797958],
                [10.04459, 59.79797],
                [10.044617, 59.798],
                [10.044693, 59.798035],
                [10.044786, 59.798042],
                [10.044877, 59.798077],
                [10.044964, 59.79813],
                [10.045095, 59.798141],
                [10.045177, 59.798107],
                [10.045287, 59.798138],
                [10.045488, 59.798149],
                [10.045563, 59.798206],
                [10.045584, 59.79821],
                [10.045627, 59.798241],
                [10.045838, 59.79834],
                [10.045884, 59.798405],
                [10.045963, 59.798485],
                [10.046016, 59.798523],
                [10.046064, 59.798542],
                [10.046118, 59.798584],
                [10.04611, 59.79866],
                [10.046056, 59.798706],
                [10.046092, 59.798725],
                [10.046154, 59.798729],
                [10.04624, 59.798706],
                [10.04658, 59.798675],
                [10.046644, 59.798649],
                [10.046826, 59.798607],
                [10.046962, 59.798664],
                [10.047086, 59.798698],
                [10.047171, 59.798756],
                [10.047262, 59.798759],
                [10.047326, 59.798748],
                [10.047473, 59.798767],
                [10.047602, 59.798721],
                [10.047656, 59.798679],
                [10.047772, 59.798687],
                [10.047901, 59.798736],
                [10.047961, 59.798798],
                [10.048169, 59.798839],
                [10.048308, 59.798878],
                [10.048418, 59.798939],
                [10.048454, 59.799019],
                [10.048586, 59.79908],
                [10.048601, 59.799133],
                [10.048751, 59.799179],
                [10.048929, 59.799133],
                [10.049374, 59.798725],
                [10.049605, 59.798592],
                [10.049559, 59.798595],
                [10.049595, 59.798565],
                [10.049672, 59.798538],
                [10.04975, 59.798458],
                [10.049883, 59.798454],
                [10.049969, 59.798427],
                [10.050042, 59.798355],
                [10.050191, 59.798263],
                [10.050221, 59.798187],
                [10.050403, 59.798065],
                [10.050555, 59.798008],
                [10.050604, 59.797924],
                [10.050691, 59.797829],
                [10.050919, 59.797756],
                [10.051168, 59.797691],
                [10.051227, 59.797653],
                [10.051309, 59.797554],
                [10.051297, 59.797485],
                [10.051244, 59.797378],
                [10.051255, 59.797386],
                [10.051283, 59.797356],
                [10.051363, 59.797363],
                [10.051512, 59.797436],
                [10.051636, 59.79742],
                [10.051762, 59.797375],
                [10.051978, 59.797382],
                [10.052076, 59.797371],
                [10.052199, 59.79734],
                [10.052357, 59.797287],
                [10.052445, 59.797325],
                [10.052413, 59.797523],
                [10.052438, 59.797554],
                [10.052507, 59.797604],
                [10.053106, 59.797821],
                [10.053677, 59.797939],
                [10.053857, 59.797954],
                [10.05413, 59.798015],
                [10.054356, 59.798096],
                [10.054551, 59.798118],
                [10.054671, 59.798092],
                [10.05482, 59.798077],
                [10.055, 59.798122],
                [10.055418, 59.798164],
                [10.055787, 59.798225],
                [10.055842, 59.798286],
                [10.056052, 59.798344],
                [10.056271, 59.798443],
                [10.056645, 59.798473],
                [10.056921, 59.798511],
                [10.057008, 59.798592],
                [10.057073, 59.79871],
                [10.057213, 59.798862],
                [10.057236, 59.79892],
                [10.057437, 59.79903],
                [10.057499, 59.799053],
                [10.057637, 59.799137],
                [10.057961, 59.799297],
                [10.05802, 59.799412],
                [10.058212, 59.799465],
                [10.058308, 59.799518],
                [10.058492, 59.799587],
                [10.058595, 59.799587],
                [10.059045, 59.799625],
                [10.059293, 59.799683],
                [10.059466, 59.799751],
                [10.059789, 59.799904],
                [10.059882, 59.799927],
                [10.060244, 59.79998],
                [10.060498, 59.799969],
                [10.060796, 59.800018],
                [10.060891, 59.800095],
                [10.061025, 59.800262],
                [10.06114, 59.800362],
                [10.061323, 59.800438],
                [10.061474, 59.800548],
                [10.06164, 59.800613],
                [10.061731, 59.800629],
                [10.061973, 59.800609],
                [10.062166, 59.800606],
                [10.062497, 59.800541],
                [10.06265, 59.800541],
                [10.062831, 59.800518],
                [10.06302, 59.800537],
                [10.063239, 59.800529],
                [10.063492, 59.800506],
                [10.063763, 59.800499],
                [10.063904, 59.800548],
                [10.064021, 59.800571],
                [10.064032, 59.800583],
                [10.064111, 59.800583],
                [10.06442, 59.800735],
                [10.064593, 59.800865],
                [10.064803, 59.800926],
                [10.065349, 59.801147],
                [10.065596, 59.801338],
                [10.065692, 59.80138],
                [10.065967, 59.801407],
                [10.06622, 59.801453],
                [10.066467, 59.801365],
                [10.066603, 59.801372],
                [10.066714, 59.801437],
                [10.066921, 59.801441],
                [10.067206, 59.801441],
                [10.067276, 59.801475],
                [10.067333, 59.801475],
                [10.067508, 59.801521],
                [10.067829, 59.801521],
                [10.068386, 59.801571],
                [10.068535, 59.801571],
                [10.069176, 59.801647],
                [10.069309, 59.801685],
                [10.06959, 59.80172],
                [10.069724, 59.801777],
                [10.069798, 59.801853],
                [10.069842, 59.801872],
                [10.070002, 59.801906],
                [10.070235, 59.802051],
                [10.070384, 59.802246],
                [10.070533, 59.802383],
                [10.070676, 59.802421],
                [10.070719, 59.80241],
                [10.070916, 59.802441],
                [10.07106, 59.802441],
                [10.071245, 59.80249],
                [10.071398, 59.802555],
                [10.071464, 59.80257],
                [10.071718, 59.802704],
                [10.071776, 59.802795],
                [10.071802, 59.802914],
                [10.071813, 59.803013],
                [10.071802, 59.80302],
                [10.071871, 59.803104],
                [10.071966, 59.803188],
                [10.072273, 59.803329],
                [10.072548, 59.803387],
                [10.072827, 59.803429],
                [10.073148, 59.803699],
                [10.073558, 59.803974],
                [10.073779, 59.80402],
                [10.074164, 59.804077],
                [10.074572, 59.804195],
                [10.074682, 59.804203],
                [10.074796, 59.804268],
                [10.074857, 59.804333],
                [10.074866, 59.804382],
                [10.074993, 59.804497],
                [10.075277, 59.804588],
                [10.075549, 59.804617],
                [10.075733, 59.80459],
                [10.075871, 59.804619],
                [10.075981, 59.804706],
                [10.076051, 59.804794],
                [10.07628, 59.80497],
                [10.076523, 59.805038],
                [10.077116, 59.804958],
                [10.077411, 59.804962],
                [10.07775, 59.804912],
                [10.078133, 59.804874],
                [10.078463, 59.804859],
                [10.078782, 59.80479],
                [10.078984, 59.804634],
                [10.079162, 59.804523],
                [10.079436, 59.804447],
                [10.079626, 59.804462],
                [10.079832, 59.804504],
                [10.079961, 59.804512],
                [10.080923, 59.804516],
                [10.081373, 59.804497],
                [10.08201, 59.804455],
                [10.082806, 59.804359],
                [10.082972, 59.804352],
                [10.083144, 59.804382],
                [10.083347, 59.804287],
                [10.083474, 59.804207],
                [10.083537, 59.804134],
                [10.083585, 59.804031],
                [10.083547, 59.80397],
                [10.083414, 59.803902],
                [10.083267, 59.803772],
                [10.083612, 59.80331],
                [10.083853, 59.803085],
                [10.08421, 59.802906],
                [10.084307, 59.802647],
                [10.084495, 59.80249],
                [10.085101, 59.802262]
            ]
		}];

		var myStyle = {
		    "color": "#ff7800",
		    "weight": 5,
		    "opacity": 0.65
		};

		var trip = L.geoJson(myLines, {
		    style: myStyle
		});
		
        
        var markerGroup = new L.LayerGroup();
        map.addLayer(markerGroup);
        var marker;
		trip.on('mouseover', function(e) {
		    //alert(e.latlng);
            markerGroup.clearLayers(); 
            //var latlng = new L.LatLng(e.latlng);
            marker = new L.CircleMarker(e.latlng);
            markerGroup.addLayer(marker);
		});
		
		trip.addTo(map);
		
		map.fitBounds(trip.getBounds());
		
		
	</script>
	
	<script>
    
    
    file_geojson = myLines[0];


    // Request elevation profile
   	$.ajax({
	      url: "../elev/",
	      dataType: 'json',
	      type: 'post',
	      contentType: "application/json",
	      data: JSON.stringify(file_geojson),
	      success: setElevationProfile
	});
    
   
    var graphData = new Array();
    function setElevationProfile(data) {
        // Get features    
	    geoJson = data.features;
			   
        // Go through each point
        $.each(data.features, function(index, value) { 
            elev = value.properties.elev;
            // Check for negative values. The graph does not draw null values
            if(elev < 0) { 
                elev = null;
            }
            tmp = {x:parseFloat(value.properties.distance), y:parseFloat(elev)};
            graphData.push(tmp);
        });
        
        
    	// instantiate our graph!

    	var graph = new Rickshaw.Graph( {
    		element: document.getElementById("chart"),
    		width: $('.container').width(),
    		height: 100,
    		renderer: 'area',
            min: 'auto',
    		series: [
    			{
    				color: "#F8F8F8",
    				data: graphData,
    				name: 'elevation'
    			}
    		]
    	} );
	
    	/*
    	var y_ticks = new Rickshaw.Graph.Axis.Y( {
    		graph: graph,
    		orientation: 'left',
    		tickFormat: Rickshaw.Fixtures.Number.formatKMBT,
    		element: document.getElementById('y_axis'),
    	} );
    	*/

    	graph.render();

    	var hoverDetail = new Rickshaw.Graph.HoverDetail( {
    		graph: graph,
    		formatter: function(series, x, y) {
    			var date = '<span class="date">' + new Date(x * 1000).toUTCString() + '</span>';
    			var swatch = '<span class="detail_swatch" style="background-color: ' + series.color + '"></span>';
                var km = parseInt(x)/1000;
    			var content =  "Meter over havet: " + parseInt(y) + '<br>' + "Antall km: "+ km +"km";
                
                for(i=0; i<geoJson.length; i++) {
                    if(parseFloat(geoJson[i].properties.distance) == x) {
                        
                        markerGroup.clearLayers(); 
                        
                    	var source = new Proj4js.Proj('EPSG:900913');    //source coordinates will be in Longitude/Latitude
                    	var dest = new Proj4js.Proj('EPSG:4326');     //destination coordinates in LCC, south of France
                    	var p = new Proj4js.Point(geoJson[i].geometry.coordinates[0], geoJson[i].geometry.coordinates[1]);  
                    	Proj4js.transform(source, dest, p);      //do the transformation.  x and y are modified in place
                    
                        var latlng = new L.LatLng(p.y, p.x);
                        marker = new L.CircleMarker(latlng);
                        markerGroup.addLayer(marker);
                    }
                }
        
    			return content;
		
    		}
    	} );
    }

	

	</script>

</html>
